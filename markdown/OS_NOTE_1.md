---
title: "OS_NOTE_1"
date: 2019-05-19T12:47:14+08:00
tags:
- OS
#thumbnailImage: //example.com/image.jpg
---

<!--more-->

## 第4章 文件系统

​		阅读前需要知道的知识点。最好有点操作系统的基础吧。在这里整理下操作系统，文件系统的内容吧。

- 文件是磁盘（存储介质）的抽象。可以把理解文件是看成是一个地址空间
- UNIX和windows的文件都是无结构的字节序列
- seek来实现随机访问
- FCB

#### 软连接与硬连接

- 硬连接是在指定的地方也生成了一个i-node，同时会吧inode的计数器+1，两个i-node同时指向一个真实的文件。i-node可以理解是一个FCB
- 软连接是在里面存入真实一个地址，系统通过这个地址来找到这个文件。这样可以要求那个文件并不存在。可以跨硬盘甚至是主机。不过效率会低一些，毕竟要一次地址转换。

#### 文件系统的实现

![文件系统](<http://www.baggk.xin/images/fSsturt.jpg>)

+ BITMAP
+ 链表分配
+ 文件分配表（FAT）
+ i节点

lzk_baggk

> ​		虽然各种的都有优缺点，但是总体来说，从上到下是逐步优化的过程。bitmap是一个顺序分配的方案，算法简单、读性能比较好，单个操作就可以把这个文件读出来。但是也存在比较明显的问题，随着时间的推移，磁盘会变得很零碎。
>
> ​		链表分配，是对BITMAP的一种优化，将顺序的改成链表形式的，但是这样随机访问就变得非常缓慢，同时文件内容不再是2的幂次方，会减低程序性能。
>
> ​		文件分配表（FAT），是链表分配的一种优化，将指针放在内容里面。可以解决链表的不足，但是同时也是因为需要放在内存里面，占用了太多的内容。
>
> ​		i-node思路上，和文件分配表有相似的地方，不过他主要当文件打开的时候，i-node才在内存里面。

  #### 目录的实现

​		在过去会把文件的属性，放在目录项里面，但是对于i-node实现的系统来说，其实在目录下其实只需要文件名与i节点号就可以了。这样可以提高内存的使用率。

#### 磁盘空间管理

​		几乎所有的文件系统，都是把文件分割成**固定大小**的块来储存，各块之间不一定相邻。

lzk_baggk

> ​		所以在读取一个磁盘的时候，读取一个字节和读取一块字节的时间差不多。这也是B数的工作原理。

